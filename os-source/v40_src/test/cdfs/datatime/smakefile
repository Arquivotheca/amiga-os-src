SYSTEMNAME = DataTime
SYSTEMVERSION = 1

MAKE = SMake

OFILES = main.o

CFILES = main.c

AFILES =

LTOOL = SLink
LLIBS = LIB:SCM.lib+LIB:SC.lib+LIB:amiga.lib+LIB:debug.lib+TimeLib/time.lib+ErrReport/ErrReport.lib
LFLAGS = VERBOSE BATCH NOICONS

ATOOL = casm
AFLAGS = -iInclude:

CTOOL = SC
CFLAGS = DEBUG=FULLFLUSH UTILLIB NOSTKCHK ERRREXX UCHAR STREQ DEFINE DEBUG CNEST
# CFLAGS = UTILLIB NOSTKCHK ERRREXX UCHAR STREQ OPTIMIZE CNEST

$(SYSTEMNAME): $(OFILES) revision.o
    $(LTOOL) WITH $(SYSTEMNAME).with LIB $(LLIBS) $(LFLAGS) TO $(SYSTEMNAME)
    $(LTOOL) WITH $(SYSTEMNAME).with LIB $(LLIBS) $(LFLAGS) TO $(SYSTEMNAME).strip NODEBUG

release:
    bumprev $(SYSTEMVERSION) $(SYSTEMNAME)_rev
    touch revision.c
    $(MAKE)

.c.o:
    $(CTOOL) $(CFLAGS) $(PRECOMPHDR) $*.c

.a.o:
    $(ATOOL) -a $*.a -o $*.o $(AFLAGS)

