head     36.44;
branch   ;
access   ;
symbols  ;
locks    ; strict;
comment  @ * @;


36.44
date     94.02.01.14.16.04;  author jesup;  state Exp;
branches ;
next     36.43;

36.43
date     92.06.02.23.40.23;  author jesup;  state Exp;
branches ;
next     36.42;

36.42
date     92.06.02.22.47.09;  author jesup;  state Exp;
branches ;
next     36.41;

36.41
date     92.05.14.14.44.24;  author jesup;  state Exp;
branches ;
next     36.40;

36.40
date     92.04.07.01.52.11;  author jesup;  state Exp;
branches ;
next     36.39;

36.39
date     92.04.07.01.50.05;  author jesup;  state Exp;
branches ;
next     36.38;

36.38
date     91.11.08.14.28.58;  author jesup;  state Exp;
branches ;
next     36.37;

36.37
date     91.04.12.22.01.39;  author jesup;  state Exp;
branches ;
next     36.36;

36.36
date     91.03.17.20.03.09;  author jesup;  state Exp;
branches ;
next     36.35;

36.35
date     91.02.25.16.19.49;  author jesup;  state Exp;
branches ;
next     36.34;

36.34
date     91.02.13.06.40.37;  author jesup;  state Exp;
branches ;
next     36.33;

36.33
date     91.02.08.17.52.20;  author jesup;  state Exp;
branches ;
next     36.32;

36.32
date     91.02.08.17.51.26;  author jesup;  state Exp;
branches ;
next     36.31;

36.31
date     91.02.06.22.06.00;  author jesup;  state Exp;
branches ;
next     36.30;

36.30
date     91.02.06.22.04.00;  author jesup;  state Exp;
branches ;
next     36.29;

36.29
date     91.01.27.03.03.12;  author jesup;  state Exp;
branches ;
next     36.28;

36.28
date     91.01.17.14.22.16;  author jesup;  state Exp;
branches ;
next     36.27;

36.27
date     90.11.02.23.23.11;  author jesup;  state Exp;
branches ;
next     36.26;

36.26
date     90.08.28.02.04.17;  author jesup;  state Exp;
branches ;
next     36.25;

36.25
date     90.07.30.13.44.13;  author jesup;  state Exp;
branches ;
next     36.24;

36.24
date     90.07.12.03.22.45;  author jesup;  state Exp;
branches ;
next     36.23;

36.23
date     90.05.31.07.11.37;  author jesup;  state Exp;
branches ;
next     36.22;

36.22
date     90.05.09.02.31.29;  author jesup;  state Exp;
branches ;
next     36.21;

36.21
date     90.04.09.17.41.29;  author jesup;  state Exp;
branches ;
next     36.20;

36.20
date     90.04.09.17.14.48;  author jesup;  state Exp;
branches ;
next     36.19;

36.19
date     90.04.03.05.18.52;  author jesup;  state Exp;
branches ;
next     36.18;

36.18
date     90.04.03.04.49.34;  author jesup;  state Exp;
branches ;
next     36.17;

36.17
date     90.03.18.00.14.03;  author jesup;  state Exp;
branches ;
next     36.16;

36.16
date     90.03.03.02.33.12;  author jesup;  state Exp;
branches ;
next     36.15;

36.15
date     90.01.17.22.05.35;  author jesup;  state Exp;
branches ;
next     36.14;

36.14
date     89.12.15.05.24.35;  author jesup;  state Exp;
branches ;
next     36.13;

36.13
date     89.12.15.00.15.12;  author jesup;  state Exp;
branches ;
next     36.12;

36.12
date     89.12.10.22.48.16;  author jesup;  state Exp;
branches ;
next     36.11;

36.11
date     89.12.09.02.12.30;  author jesup;  state Exp;
branches ;
next     36.10;

36.10
date     89.12.08.07.52.41;  author jesup;  state Exp;
branches ;
next     36.9;

36.9
date     89.12.03.14.56.44;  author jesup;  state Exp;
branches ;
next     36.8;

36.8
date     89.12.01.08.31.48;  author jesup;  state Exp;
branches ;
next     36.7;

36.7
date     89.11.22.03.40.07;  author jesup;  state Exp;
branches ;
next     36.6;

36.6
date     89.11.16.16.42.39;  author jesup;  state Exp;
branches ;
next     36.5;

36.5
date     89.11.14.16.07.04;  author jesup;  state Exp;
branches ;
next     36.4;

36.4
date     89.11.14.01.53.20;  author jesup;  state Exp;
branches ;
next     36.3;

36.3
date     89.10.18.04.47.19;  author jesup;  state Exp;
branches ;
next     36.2;

36.2
date     89.10.03.18.32.20;  author jesup;  state Exp;
branches ;
next     36.1;

36.1
date     89.09.20.17.00.35;  author jesup;  state Exp;
branches ;
next     ;


desc
@@


36.44
log
@added Unix device types (ST_xxx) for Berkeley FFS under AmigaDos
@
text
@#ifndef DOS_DOSEXTENS_H
#define DOS_DOSEXTENS_H
/*
**	$Id: dosextens.h,v 36.43 92/06/02 23:40:23 jesup Exp $
**
**	DOS structures not needed for the casual AmigaDOS user 
**
**	(C) Copyright 1985,1986,1987,1988,1989,1990 Commodore-Amiga, Inc.
**	    All Rights Reserved
*/

#ifndef EXEC_TASKS_H
#include "exec/tasks.h"
#endif
#ifndef EXEC_PORTS_H
#include "exec/ports.h"
#endif
#ifndef EXEC_LIBRARIES_H
#include "exec/libraries.h"
#endif
#ifndef EXEC_SEMAPHORES_H
#include "exec/semaphores.h"
#endif
#ifndef DEVICES_TIMER_H
#include "devices/timer.h"
#endif

#ifndef DOS_DOS_H
#include "dos/dos.h"
#endif

/* All DOS processes have this structure */
/* Create and Device Proc returns pointer to the MsgPort in this structure */
/* dev_proc = (struct Process *) (DeviceProc(..) - sizeof(struct Task)); */

struct Process {
    struct  Task    pr_Task;	     
    struct  MsgPort pr_MsgPort; /* This is BPTR address from DOS functions  */
    WORD    pr_Pad;		/* Remaining variables on 4 byte boundaries */
    BPTR    pr_SegList;		/* Array of seg lists used by this process  */
    LONG    pr_StackSize;	/* Size of process stack in bytes	    */
    APTR    pr_GlobVec;		/* Global vector for this process (BCPL)    */
    LONG    pr_TaskNum;		/* CLI task number of zero if not a CLI	    */
    BPTR    pr_StackBase;	/* Ptr to high memory end of process stack  */
    LONG    pr_Result2;		/* Value of secondary result from last call */
    BPTR    pr_CurrentDir;	/* Lock associated with current directory   */
    BPTR    pr_CIS;		/* Current CLI Input Stream		    */
    BPTR    pr_COS;		/* Current CLI Output Stream		    */
    APTR    pr_ConsoleTask;	/* Console handler process for current window*/
    APTR    pr_FileSystemTask;	/* File handler process for current drive   */
    BPTR    pr_CLI;		/* pointer to CommandLineInterface	    */
    APTR    pr_ReturnAddr;	/* pointer to previous stack frame	    */
    APTR    pr_PktWait;		/* Function to be called when awaiting msg  */
    APTR    pr_WindowPtr;	/* Window for error printing		    */

    /* following definitions are new with 2.0 */
    BPTR    pr_HomeDir;		/* Home directory of executing program      */
    LONG    pr_Flags;		/* flags telling dos about process	    */
    LONG    (*pr_ExitCode)();	/* code to call on exit of program or NULL  */
    LONG    pr_ExitData;	/* Passed as an argument to pr_ExitCode.    */
    UBYTE   *pr_Arguments;	/* Arguments passed to the process at start */
    struct MinList pr_LocalVars; /* Local environment variables		    */
    ULONG   pr_ShellPrivate;	/* for the use of the current shell	    */
    BPTR    pr_CES;		/* Error stream - if NULL, use pr_COS	    */
};  /* Process */

/*
 * Flags for pr_Flags
 */
#define	PRB_FREESEGLIST		0
#define	PRF_FREESEGLIST		1
#define	PRB_FREECURRDIR		1
#define	PRF_FREECURRDIR		2
#define	PRB_FREECLI		2
#define	PRF_FREECLI		4
#define	PRB_CLOSEINPUT		3
#define	PRF_CLOSEINPUT		8
#define	PRB_CLOSEOUTPUT		4
#define	PRF_CLOSEOUTPUT		16
#define	PRB_FREEARGS		5
#define	PRF_FREEARGS		32

/* The long word address (BPTR) of this structure is returned by
 * Open() and other routines that return a file.  You need only worry
 * about this struct to do async io's via PutMsg() instead of
 * standard file system calls */

struct FileHandle {
   struct Message *fh_Link;	 /* EXEC message	      */   
   struct MsgPort *fh_Port;	 /* Reply port for the packet */
   struct MsgPort *fh_Type;	 /* Port to do PutMsg() to  
				  * Address is negative if a plain file */
   LONG fh_Buf;
   LONG fh_Pos;
   LONG fh_End;
   LONG fh_Funcs;
#define fh_Func1 fh_Funcs
   LONG fh_Func2;
   LONG fh_Func3;
   LONG fh_Args;
#define fh_Arg1 fh_Args
   LONG fh_Arg2;
}; /* FileHandle */

/* This is the extension to EXEC Messages used by DOS */

struct DosPacket {
   struct Message *dp_Link;	 /* EXEC message	      */
   struct MsgPort *dp_Port;	 /* Reply port for the packet */
				 /* Must be filled in each send. */
   LONG dp_Type;		 /* See ACTION_... below and 
				  * 'R' means Read, 'W' means Write to the
				  * file system */
   LONG dp_Res1;		 /* For file system calls this is the result
				  * that would have been returned by the
				  * function, e.g. Write ('W') returns actual
				  * length written */
   LONG dp_Res2;		 /* For file system calls this is what would
				  * have been returned by IoErr() */
/*  Device packets common equivalents */
#define dp_Action  dp_Type
#define dp_Status  dp_Res1
#define dp_Status2 dp_Res2
#define dp_BufAddr dp_Arg1
   LONG dp_Arg1;		    
   LONG dp_Arg2;
   LONG dp_Arg3;
   LONG dp_Arg4;
   LONG dp_Arg5;
   LONG dp_Arg6;
   LONG dp_Arg7;
}; /* DosPacket */

/* A Packet does not require the Message to be before it in memory, but
 * for convenience it is useful to associate the two. 
 * Also see the function init_std_pkt for initializing this structure */

struct StandardPacket {
   struct Message   sp_Msg;
   struct DosPacket sp_Pkt;
}; /* StandardPacket */

/* Packet types */
#define ACTION_NIL		0
#define ACTION_STARTUP		0
#define ACTION_GET_BLOCK	2	/* OBSOLETE */
#define ACTION_SET_MAP		4
#define ACTION_DIE		5
#define ACTION_EVENT		6
#define ACTION_CURRENT_VOLUME	7
#define ACTION_LOCATE_OBJECT	8
#define ACTION_RENAME_DISK	9
#define ACTION_WRITE		'W'
#define ACTION_READ		'R'
#define ACTION_FREE_LOCK	15
#define ACTION_DELETE_OBJECT	16
#define ACTION_RENAME_OBJECT	17
#define ACTION_MORE_CACHE	18
#define ACTION_COPY_DIR		19
#define ACTION_WAIT_CHAR	20
#define ACTION_SET_PROTECT	21
#define ACTION_CREATE_DIR	22
#define ACTION_EXAMINE_OBJECT	23
#define ACTION_EXAMINE_NEXT	24
#define ACTION_DISK_INFO	25
#define ACTION_INFO		26
#define ACTION_FLUSH		27
#define ACTION_SET_COMMENT	28  
#define ACTION_PARENT		29
#define ACTION_TIMER		30
#define ACTION_INHIBIT		31
#define ACTION_DISK_TYPE	32
#define ACTION_DISK_CHANGE	33
#define ACTION_SET_DATE		34

#define ACTION_SCREEN_MODE	994

#define ACTION_READ_RETURN	1001
#define ACTION_WRITE_RETURN	1002
#define ACTION_SEEK		1008
#define ACTION_FINDUPDATE	1004
#define ACTION_FINDINPUT	1005
#define ACTION_FINDOUTPUT	1006
#define ACTION_END		1007
#define ACTION_SET_FILE_SIZE	1022	/* fast file system only in 1.3 */
#define ACTION_WRITE_PROTECT	1023	/* fast file system only in 1.3 */

/* new 2.0 packets */
#define ACTION_SAME_LOCK	40
#define ACTION_CHANGE_SIGNAL	995
#define ACTION_FORMAT		1020
#define ACTION_MAKE_LINK	1021
/**/
/**/
#define ACTION_READ_LINK	1024
#define ACTION_FH_FROM_LOCK	1026
#define ACTION_IS_FILESYSTEM	1027
#define ACTION_CHANGE_MODE	1028
/**/
#define ACTION_COPY_DIR_FH	1030
#define ACTION_PARENT_FH	1031
#define ACTION_EXAMINE_ALL	1033
#define ACTION_EXAMINE_FH	1034

#define ACTION_LOCK_RECORD	2008
#define ACTION_FREE_RECORD	2009

#define ACTION_ADD_NOTIFY	4097
#define ACTION_REMOVE_NOTIFY	4098

/* Added in V39: */
#define ACTION_EXAMINE_ALL_END	1035
#define ACTION_SET_OWNER	1036

/* Tell a file system to serialize the current volume. This is typically
 * done by changing the creation date of the disk. This packet does not take
 * any arguments.  NOTE: be prepared to handle failure of this packet for
 * V37 ROM filesystems.  Also note that this action, if supported, must
 * function even when the disk is inhibited (since it must be done before
 * uninhibiting a copied disk).
 */
#define	ACTION_SERIALIZE_DISK	4200
    
/*
 * A structure for holding error messages - stored as array with error == 0
 * for the last entry.
 */
struct ErrorString {
	LONG  *estr_Nums;
	UBYTE *estr_Strings;
};

/* DOS library node structure.
 * This is the data at positive offsets from the library node.
 * Negative offsets from the node is the jump table to DOS functions  
 * node = (struct DosLibrary *) OpenLibrary( "dos.library" .. )	     */
   
struct DosLibrary {
    struct Library dl_lib;
    struct RootNode *dl_Root; /* Pointer to RootNode, described below */
    APTR    dl_GV;	      /* Pointer to BCPL global vector	      */
    LONG    dl_A2;	      /* BCPL standard register values	      */
    LONG    dl_A5;
    LONG    dl_A6;
    struct ErrorString *dl_Errors;	  /* PRIVATE pointer to array of error msgs */
    struct timerequest *dl_TimeReq;	  /* PRIVATE pointer to timer request */
    struct Library     *dl_UtilityBase;   /* PRIVATE ptr to utility library */
    struct Library     *dl_IntuitionBase; /* PRIVATE ptr to intuition library */
};  /*	DosLibrary */

/*			       */

struct RootNode {
    BPTR    rn_TaskArray;	     /* [0] is max number of CLI's
				      * [1] is APTR to process id of CLI 1
				      * [n] is APTR to process id of CLI n */
    BPTR    rn_ConsoleSegment; /* SegList for the CLI			   */ 
    struct  DateStamp rn_Time; /* Current time				   */
    LONG    rn_RestartSeg;     /* SegList for the disk validator process   */
    BPTR    rn_Info;	       /* Pointer to the Info structure		   */
    BPTR    rn_FileHandlerSegment; /* segment for a file handler	   */
    struct MinList rn_CliList; /* new list of all CLI processes */
			       /* the first cpl_Array is also rn_TaskArray */
    struct MsgPort *rn_BootProc; /* private ptr to msgport of boot fs      */
    BPTR    rn_ShellSegment;   /* seglist for Shell (for NewShell)	   */
    LONG    rn_Flags;          /* dos flags */
};  /* RootNode */

#define RNB_WILDSTAR	24
#define RNF_WILDSTAR	(1L<<24)
#define RNB_PRIVATE1	1	/* private for dos */
#define RNF_PRIVATE1	2

/* ONLY to be allocated by DOS! */
struct CliProcList {
	struct MinNode cpl_Node;
	LONG cpl_First;	     /* number of first entry in array */
	struct MsgPort **cpl_Array;
			     /* [0] is max number of CLI's in this entry (n)
			      * [1] is CPTR to process id of CLI cpl_First
			      * [n] is CPTR to process id of CLI cpl_First+n-1
			      */
};

struct DosInfo {
    BPTR    di_McName;	       /* PRIVATE: system resident module list	    */
#define di_ResList di_McName
    BPTR    di_DevInfo;	       /* Device List				    */
    BPTR    di_Devices;	       /* Currently zero			    */
    BPTR    di_Handlers;       /* Currently zero			    */
    APTR    di_NetHand;	       /* Network handler processid; currently zero */
    struct  SignalSemaphore di_DevLock;	   /* do NOT access directly! */
    struct  SignalSemaphore di_EntryLock;  /* do NOT access directly! */
    struct  SignalSemaphore di_DeleteLock; /* do NOT access directly! */
};  /* DosInfo */

/* structure for the Dos resident list.  Do NOT allocate these, use	  */
/* AddSegment(), and heed the warnings in the autodocs!			  */

struct Segment {
	BPTR seg_Next;
	LONG seg_UC;
	BPTR seg_Seg;
	UBYTE seg_Name[4];	/* actually the first 4 chars of BSTR name */
};

#define CMD_SYSTEM	-1
#define CMD_INTERNAL	-2
#define CMD_DISABLED	-999


/* DOS Processes started from the CLI via RUN or NEWCLI have this additional
 * set to data associated with them */

struct CommandLineInterface {
    LONG   cli_Result2;	       /* Value of IoErr from last command	  */  
    BSTR   cli_SetName;	       /* Name of current directory		  */
    BPTR   cli_CommandDir;     /* Head of the path locklist		  */
    LONG   cli_ReturnCode;     /* Return code from last command		  */
    BSTR   cli_CommandName;    /* Name of current command		  */
    LONG   cli_FailLevel;      /* Fail level (set by FAILAT)		  */
    BSTR   cli_Prompt;	       /* Current prompt (set by PROMPT)	  */
    BPTR   cli_StandardInput;  /* Default (terminal) CLI input		  */
    BPTR   cli_CurrentInput;   /* Current CLI input			  */
    BSTR   cli_CommandFile;    /* Name of EXECUTE command file		  */
    LONG   cli_Interactive;    /* Boolean; True if prompts required	  */
    LONG   cli_Background;     /* Boolean; True if CLI created by RUN	  */
    BPTR   cli_CurrentOutput;  /* Current CLI output			  */
    LONG   cli_DefaultStack;   /* Stack size to be obtained in long words */
    BPTR   cli_StandardOutput; /* Default (terminal) CLI output		  */
    BPTR   cli_Module;	       /* SegList of currently loaded command	  */
};  /* CommandLineInterface */

/* This structure can take on different values depending on whether it is
 * a device, an assigned directory, or a volume.  Below is the structure
 * reflecting volumes only.  Following that is the structure representing
 * only devices. Following that is the unioned structure representing all 
 * the values
 *
 * NOTE: the dol/dl/dvi_Name field MUST be a BSTR followed by a null ('\0').
 * The null must not be included in the BSTR count.  Yes, this is wierd, sorry.
 */

/* structure representing a volume */

struct DeviceList {
    BPTR		dl_Next;	/* bptr to next device list */
    LONG		dl_Type;	/* see DLT below */
    struct MsgPort *	dl_Task;	/* ptr to handler task */
    BPTR		dl_Lock;	/* not for volumes */
    struct DateStamp	dl_VolumeDate;	/* creation date */
    BPTR		dl_LockList;	/* outstanding locks */
    LONG		dl_DiskType;	/* 'DOS', etc */
    LONG		dl_unused;
    BSTR 		dl_Name;	/* bptr to bcpl name */
};

/* device structure (same as the DeviceNode structure in filehandler.h) */

struct	      DevInfo {
    BPTR  dvi_Next;
    LONG  dvi_Type;
    APTR  dvi_Task;
    BPTR  dvi_Lock;
    BSTR  dvi_Handler;
    LONG  dvi_StackSize;
    LONG  dvi_Priority;
    LONG  dvi_Startup;
    BPTR  dvi_SegList;
    BPTR  dvi_GlobVec;
    BSTR  dvi_Name;
};

/* combined structure for devices, assigned directories, volumes */

struct DosList {
    BPTR		dol_Next;	 /* bptr to next device on list */
    LONG		dol_Type;	 /* see DLT below */
    struct MsgPort     *dol_Task;	 /* ptr to handler task */
    BPTR		dol_Lock;
    union {
	struct {
	BSTR	dol_Handler;	/* file name to load if seglist is null */
	LONG	dol_StackSize;	/* stacksize to use when starting process */
	LONG	dol_Priority;	/* task priority when starting process */
	ULONG	dol_Startup;	/* startup msg: FileSysStartupMsg for disks */
	BPTR	dol_SegList;	/* already loaded code for new task */
	BPTR	dol_GlobVec;	/* BCPL global vector to use when starting
				 * a process. -1 indicates a C/Assembler
				 * program. */
	} dol_handler;

	struct {
	struct DateStamp	dol_VolumeDate;	 /* creation date */
	BPTR			dol_LockList;	 /* outstanding locks */
	LONG			dol_DiskType;	 /* 'DOS', etc */
	} dol_volume;

	struct {
	UBYTE 	*dol_AssignName;     /* name for non-or-late-binding assign */
	struct AssignList *dol_List; /* for multi-directory assigns (regular) */
	} dol_assign;

    } dol_misc;

    BSTR		dol_Name;	 /* bptr to bcpl name */
    };

/* structure used for multi-directory assigns. AllocVec()ed. */

struct AssignList {
	struct AssignList *al_Next;
	BPTR		   al_Lock;
};

/* definitions for dl_Type */
#define DLT_DEVICE	0
#define DLT_DIRECTORY	1	/* assign */
#define DLT_VOLUME	2
#define DLT_LATE	3	/* late-binding assign */
#define DLT_NONBINDING	4	/* non-binding assign */
#define DLT_PRIVATE	-1	/* for internal use only */

/* structure return by GetDeviceProc() */
struct DevProc {
	struct MsgPort *dvp_Port;
	BPTR		dvp_Lock;
	ULONG		dvp_Flags;
	struct DosList *dvp_DevNode;	/* DON'T TOUCH OR USE! */
};

/* definitions for dvp_Flags */
#define DVPB_UNLOCK	0
#define DVPF_UNLOCK	(1L << DVPB_UNLOCK)
#define DVPB_ASSIGN	1
#define DVPF_ASSIGN	(1L << DVPB_ASSIGN)

/* Flags to be passed to LockDosList(), etc */
#define LDB_DEVICES	2
#define LDF_DEVICES	(1L << LDB_DEVICES)
#define LDB_VOLUMES	3
#define LDF_VOLUMES	(1L << LDB_VOLUMES)
#define LDB_ASSIGNS	4
#define LDF_ASSIGNS	(1L << LDB_ASSIGNS)
#define LDB_ENTRY	5
#define LDF_ENTRY	(1L << LDB_ENTRY)
#define LDB_DELETE	6
#define LDF_DELETE	(1L << LDB_DELETE)

/* you MUST specify one of LDF_READ or LDF_WRITE */
#define LDB_READ	0
#define LDF_READ	(1L << LDB_READ)
#define LDB_WRITE	1
#define LDF_WRITE	(1L << LDB_WRITE)

/* actually all but LDF_ENTRY (which is used for internal locking) */
#define LDF_ALL		(LDF_DEVICES|LDF_VOLUMES|LDF_ASSIGNS)

/* a lock structure, as returned by Lock() or DupLock() */
struct FileLock {
    BPTR		fl_Link;	/* bcpl pointer to next lock */
    LONG		fl_Key;		/* disk block number */
    LONG		fl_Access;	/* exclusive or shared */
    struct MsgPort *	fl_Task;	/* handler task's port */
    BPTR		fl_Volume;	/* bptr to DLT_VOLUME DosList entry */
};

/* error report types for ErrorReport() */
#define REPORT_STREAM		0	/* a stream */
#define REPORT_TASK		1	/* a process - unused */
#define REPORT_LOCK		2	/* a lock */
#define REPORT_VOLUME		3	/* a volume node */
#define REPORT_INSERT		4	/* please insert volume */

/* Special error codes for ErrorReport() */
#define ABORT_DISK_ERROR	296	/* Read/write error */
#define ABORT_BUSY		288	/* You MUST replace... */

/* types for initial packets to shells from run/newcli/execute/system. */
/* For shell-writers only */
#define RUN_EXECUTE		-1
#define RUN_SYSTEM		-2
#define RUN_SYSTEM_ASYNCH	-3

/* Types for fib_DirEntryType.  NOTE that both USERDIR and ROOT are	 */
/* directories, and that directory/file checks should use <0 and >=0.	 */
/* This is not necessarily exhaustive!  Some handlers may use other      */
/* values as needed, though <0 and >=0 should remain as supported as	 */
/* possible.								 */
#define ST_ROOT		1
#define ST_USERDIR	2
#define ST_SOFTLINK	3	/* looks like dir, but may point to a file! */
#define ST_LINKDIR	4	/* hard link to dir */
#define ST_FILE		-3	/* must be negative for FIB! */
#define ST_LINKFILE	-4	/* hard link to file */
#define ST_PIPEFILE	-5	/* for pipes that support ExamineFH */


/* these are primarily for Unix filesystems mounted under AmigaDos */
#define	ST_BDEVICE	-10	/* block special device (block only access) */
#define	ST_CDEVICE	-11	/* character special device (byte accessable) */
#define	ST_SOCKET	-12	/* Unix style socket */
#define	ST_FIFO		-13	/* named pipe */
#define	ST_LIFO		-14	/* named stack */
    
#endif	/* DOS_DOSEXTENS_H */
@


36.43
log
@Added comment about serialize_disk
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.42 92/06/02 22:47:09 jesup Exp Locker: jesup $
d59 1
a59 1
    void    (*pr_ExitCode)();	/* code to call on exit of program or NULL  */
d498 8
@


36.42
log
@Added comment about dol_Name
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.41 92/05/14 14:44:24 jesup Exp Locker: jesup $
d218 3
a220 1
 * V37 ROM filesystems.
@


36.41
log
@Added ACTION_SET_OWNER
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.40 92/04/07 01:52:11 jesup Exp $
d337 3
@


36.40
log
@Oops.  Use C, not asm, for .h files
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.38 91/11/08 14:28:58 jesup Exp Locker: jesup $
d213 1
@


36.39
log
@Added ACTION_EXAMINE_ALL_END
@
text
@d212 1
a212 1
ACTION_EXAMINE_ALL_END	EQU	1035
@


36.38
log
@Added ACTION_SERIALIZE_DISK
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.38 91/11/08 14:28:05 jesup Exp $
d210 3
@


36.37
log
@Added dl_IntuitionBase
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.36 91/03/17 20:03:09 jesup Exp Locker: jesup $
d211 7
@


36.36
log
@Added ST_PIPEFILE
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.35 91/02/25 16:19:49 jesup Exp Locker: jesup $
d229 1
a229 1
    LONG    dl_A2;	      /* Private register dump of DOS	      */
d232 4
a235 3
    struct ErrorString *dl_Errors;  /* pointer to array of error msgs */
    struct timerequest *dl_TimeReq; /* private pointer to timer request */
    struct Library     *dl_UtilityBase; /* private ptr to utility library */
@


36.35
log
@Added LDF_DELETE
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.34 91/02/13 06:40:37 jesup Exp Locker: jesup $
d479 1
@


36.34
log
@Added struct Segment
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.33 91/02/08 17:52:20 jesup Exp Locker: jesup $
d278 3
a280 2
    struct  SignalSemaphore di_DevLock;	  /* do NOT access directly! */
    struct  SignalSemaphore di_EntryLock; /* do NOT access directly! */
d430 2
@


36.33
log
@Fixed RNF_PRIVATE
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.32 91/02/08 17:51:26 jesup Exp Locker: jesup $
d281 15
@


36.32
log
@Fixed RNF_PRIVATE
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.31 91/02/06 22:06:00 jesup Exp Locker: jesup $
d258 1
a258 1
#define RBF_PRIVATE1	2
@


36.31
log
@Added flag for NameFromAnchor
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.29 91/01/27 03:03:12 jesup Exp $
@


36.30
log
@Made dl_Root type correct.
@
text
@d257 2
@


36.29
log
@Fixed some comments
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.28 91/01/17 14:22:16 jesup Exp Locker: jesup $
d226 2
a227 2
    struct  Library dl_lib;
    APTR    dl_Root;	      /* Pointer to RootNode, described below */
@


36.28
log
@added change_signal, 1.4->2.0
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.27 90/11/02 23:23:11 jesup Exp Locker: jesup $
d270 2
a271 1
    BPTR    di_McName;	       /* Network name of this machine; currently 0 */
d286 1
a286 1
    BPTR   cli_CommandDir;     /* Lock associated with command directory  */
@


36.27
log
@Added direntrytypes
@
text
@d4 1
a4 1
**	$Id: dosextens.h,v 36.24 90/07/12 03:22:45 jesup Exp $
d56 1
a56 1
    /* following definitions are new with 1.4 */
d188 1
a188 1
/* new 1.4 packets */
d190 1
@


36.26
log
@COmment changes
@
text
@d446 12
@


36.25
log
@Fixed WILDSTAR (oops)
@
text
@d51 1
a51 1
    BPTR    pr_CLI;		/* pointer to ConsoleLineInterpreter	    */
d245 1
a245 1
    BPTR    rn_Info;	       /* Pointer ot the Info structure		   */
d426 1
a426 1
    BPTR		fl_Volume;	/* bptr to a DeviceList */
@


36.24
log
@$id
@
text
@d4 1
a4 1
**	$Id: $
d254 2
a255 2
#define RNB_WILDSTAR	0
#define RNF_WILDSTAR	(1L<<0)
@


36.23
log
@Added flag for rn_Flags
@
text
@d4 1
a4 2
**	$Filename: dos/dosextens.h $
**	$Release: 1.3 $
d8 1
a8 1
**	(C) Copyright 1985,1986,1987,1988 Commodore-Amiga, Inc.
@


36.22
log
@Changes to error string stuff
@
text
@d252 1
a252 1
    LONG    rn_Flags;          /* private dos flags */
d255 2
@


36.21
log
@Oops, use c comments
@
text
@a12 3
#ifndef EXEC_TYPES_H
#include "exec/types.h"
#endif
d216 2
a217 2
	LONG   estr_Error;
	UBYTE *estr_String;
d252 1
@


36.20
log
@Added ACTION_FORMAT
@
text
@d196 2
a197 2
*
*
d202 1
a202 1
*
@


36.19
log
@Added LDF_ENTRY
@
text
@d194 1
d196 2
d202 1
@


36.18
log
@for rcs 4.x header change
@
text
@d405 2
d414 1
@


36.17
log
@*** empty log message ***
@
text
@@


36.16
log
@added Bootproc, shellsegment, system_asynch
@
text
@d253 2
@


36.15
log
@Added second semaphore.
@
text
@d249 2
d434 3
a436 2
#define RUN_EXECUTE	-1
#define RUN_SYSTEM	-2
@


36.14
log
@Added pr_CES
@
text
@d267 2
a268 2
    struct  SignalSemaphore di_DevLock;
				/* PRIVATE! FIX! should be many-reader! */
d402 1
a402 1
/* you MUST specify LDF_READ or LDF_WRITE */
@


36.13
log
@Moved some stuff to dos.h
@
text
@d68 1
@


36.12
log
@*** empty log message ***
@
text
@d67 1
a428 8
/* types for ChangeMode() */
#define CHANGE_LOCK	0
#define CHANGE_FH	1

/* Values for MakeLink() */
#define LINK_HARD	0
#define LINK_SOFT	1

a434 1

@


36.11
log
@*** empty log message ***
@
text
@d432 4
@


36.10
log
@*** empty log message ***
@
text
@d1 2
a2 2
#ifndef LIBRARIES_DOSEXTENS_H
#define LIBRARIES_DOSEXTENS_H
d4 1
a4 1
**	$Filename: libraries/dosextens.h $
d28 2
a29 3

#ifndef LIBRARIES_DOS_H
#include "libraries/dos.h"
d32 2
a33 2
#ifndef DEVICE_TIMER_H
#include "devices/timer.h"
d437 1
a437 1
#endif	/* LIBRARIES_DOSEXTENS_H */
@


36.9
log
@*** empty log message ***
@
text
@a194 1
#define ACTION_LOCK_FROM_FH	1025
@


36.8
log
@Yet more Process fields, addition to dosbase
@
text
@d199 4
@


36.7
log
@cli array is of msgports, not processes
Added stuff for ChangeMode, System()
@
text
@d63 4
d70 15
d229 1
@


36.6
log
@Added ACTION_IS_FILESYSTEM, ACTION_CHANGE_MODE, REPORT_xxx (for ErrorReport).
@
text
@d230 1
a230 1
	struct Process **cpl_Array;
d405 9
@


36.5
log
@Changed es_ to estr_ (avoid conflict with EasyRequest's es_)
@
text
@d62 1
d129 1
d178 2
d395 11
d407 1
@


36.4
log
@Extended process structure
Added new packet types, changed names.
String stuff for dos.library
@
text
@d188 2
a189 2
	LONG   es_Error;
	UBYTE *es_String;
@


36.3
log
@Added makelink/readlink actions
@
text
@d59 4
a62 1
    APTR    pr_WindowPtr;	/* Window for error printing */
d65 1
d167 2
a168 2
#define ACTION_TRUNCATE		1022	/* fast file system only */
#define ACTION_WRITE_PROTECT	1023	/* fast file system only */
d174 6
d183 9
d204 1
@


36.2
log
@Added >20 cli support (rootnode, new structure).
Added dos device list semaphore (needs to be private!)
Added flags for dos device list locking calls.
@
text
@d168 2
@


36.1
log
@*** empty log message ***
@
text
@d25 3
d197 2
d201 10
d217 2
d343 16
@
