head     39.5;
branch   ;
access   ;
symbols  rel39_24:39.5 rel39_18:39.5 rel39_97:39.5 rel39_90:39.5 rel39_89:39.5 rel39_82:39.5 rel39_76:39.5 rel39_71:39.5 rel39_65:39.5 rel39_64:39.5 rel39_61:39.5 rel39_60:39.5 rel39_55:39.5 rel39_52:39.5 rel39_47:39.5 rel39_39:39.4 rel39_38:39.4 rel39_37:39.4 rel39_35:39.4 rel39_34:39.4 V37_30:37.0 V37_29:37.0 V37_28:37.0 V37_27:37.0 V37_25:37.0 V37_24:37.0 V37_23:37.0 V37_22:37.0 V37_21:37.0 V37_20:37.0 V37_19:37.0 V37_18:37.0 V37_15:37.0 V37_14:37.0 V37_13:37.0 V37_12:37.0 V37_11:37.0 V37_10:37.0 V37_9:37.0 V37_8:37.0 V37_7:37.0 V37_6:37.0 V37_5:37.0 V37_4:37.0 V37_3:37.0 V37_2:37.0 V37_1:37.0 V36_209:33.3 V36_208:33.3 V36_207:33.3 V36_205:33.3 V36_203:33.3 V36_202:33.3 V36_201:33.3 V36_200:33.3 V36_199:33.3 V36_198:33.3 V36_196:33.3 V36_195:33.3 V36_194:33.3 V36_193:33.3 V36_192:33.3 V36_191:33.3 V36_190:33.3 V36_189:33.3 V36_188:33.3 V36_187:33.3 V36_186:33.3 V36_185:33.3 V36_184:33.3 V36_183:33.3 V36_182:33.3 V36_181:33.3 V36_180:33.3 V36_179:33.3 V36_161:33.2 V36_160:33.2 V36_158:33.2 V36_157:33.2 V36_153:33.2 V36_151:33.2 V36_147:33.2 V36_146:33.2 V36_144:33.2 V36_143:33.2 V36_142:33.2 V36_141:33.2 V36_139:33.2 V36_137:33.2 V36_136:33.2 V36_135:33.2 V36_133:33.2 V36_131:33.1 V36_130:33.1 V36_129:33.1 V36_128:33.1 V36_127:33.1 V36_126:33.1 V36_125:33.1 V36_123:33.1 V36_122:33.1 V36_121:33.1 V36_0:33.1 V36_118:33.1 V36_116:33.1 V36_115:33.1 V36_114:33.1 V36_112:33.1 V36_107:33.1 V36_106:33.1 V36_104:33.1 V36_103:33.1 V36_101:33.1 V36_100:33.1 V36_99:33.1 V36_95:33.1 V36_94:33.1 V36_92:33.1 V36_90:33.1 V36_89:33.1 V36_88:33.1 V36_83:33.1 V36_82:33.1 V36_79:33.1 V36_78:33.1 V36_77:33.1 V36_75:33.1 V36_74:33.1 V36_73:33.1 V36_72:33.1 V36_70:33.1 V36_69:33.1 V36_61:33.1 V36_60:33.1 V36_59:33.1 V36_57:33.0 V36_56:33.0 V36_55:33.0 V36_54:33.0 V36_52:33.0 V36_51:33.0 V36_50:33.0 V36_48:33.0 V36_47:33.0 V36_46:33.0 V36_45:33.0 V36_44:33.0 V36_43:33.0 V36_42:33.0 V36_41:33.0 V36_40:33.0 V36_37:33.0 V36_36:33.0 V36_35:33.0 V36_34:33.0 V36_33:33.0 V36_30:33.0 V36_29:33.0 V36_27:33.0;
locks    ; strict;
comment  @*   @;


39.5
date     92.04.03.16.51.20;  author chrisg;  state Exp;
branches ;
next     39.4;

39.4
date     91.11.15.10.55.46;  author chrisg;  state Exp;
branches ;
next     39.3;

39.3
date     91.10.30.15.47.22;  author chrisg;  state Exp;
branches ;
next     39.2;

39.2
date     91.10.28.11.51.37;  author chrisg;  state Exp;
branches ;
next     39.1;

39.1
date     91.09.23.12.22.43;  author chrisg;  state Exp;
branches ;
next     39.0;

39.0
date     91.08.21.17.11.38;  author chrisg;  state Exp;
branches ;
next     37.1;

37.1
date     91.07.09.16.31.28;  author chrisg;  state Exp;
branches ;
next     37.0;

37.0
date     91.01.07.15.14.46;  author spence;  state Exp;
branches ;
next     33.3;

33.3
date     90.07.27.16.30.10;  author bart;  state Exp;
branches ;
next     33.2;

33.2
date     90.03.28.09.40.19;  author bart;  state Exp;
branches ;
next     33.1;

33.1
date     89.05.02.09.31.48;  author bart;  state Exp;
branches ;
next     33.0;

33.0
date     86.05.17.14.57.42;  author bart;  state Exp;
branches ;
next     ;


desc
@@


39.5
log
@ added local variable macros.
@
text
@*******************************************************************************
*
*	Source Control
*	--------------
*	$Id: macros.i,v 39.4 91/11/15 10:55:46 chrisg Exp Locker: chrisg $
*
*	$Locker: chrisg $
*
*	$Log:	macros.i,v $
*   Revision 39.4  91/11/15  10:55:46  chrisg
*    added DEFINES for UNLIKELY_WORD and BYTE. used to tag interleaved
*   bitmaps.
*   
*   Revision 39.3  91/10/30  15:47:22  chrisg
*    added macro to get vectors via a viewport with null checking.
*   
*   Revision 39.2  91/10/28  11:51:37  chrisg
*    added dbugw macro
*   
*   Revision 39.1  91/09/23  12:22:43  chrisg
*   rcsdiff graphnt.h
*   added new dbg macro
*   
*   Revision 39.0  91/08/21  17:11:38  chrisg
*   Bumped
*   
*   Revision 37.1  91/07/09  16:31:28  chrisg
*     added amzing print macro
*   
*   Revision 37.0  91/01/07  15:14:46  spence
*   initial switchover from V36
*   
*   Revision 33.3  90/07/27  16:30:10  bart
*   *** empty log message ***
*   
*   Revision 33.2  90/03/28  09:40:19  bart
*   *** empty log message ***
*   
*   Revision 33.1  89/05/02  09:31:48  bart
*   copyright 1989
*   
*   Revision 33.0  86/05/17  14:57:42  bart
*   added to rcs for updating
*   
*
*******************************************************************************

*------ library dispatch macros --------------------------------------
 
CALLGFX     MACRO
        jsr _LVO\1(a6)
        ENDM

JUMPGFX     MACRO
        jmp _LVO\1(a6)
        ENDM

JSRFAR		MACRO
			xref	_LVO\1
			jsr		_LVO\1(a6)
			ENDM
 
EXTERN_FUNC  MACRO
        XREF    _LVO\1
        ENDM

CALLEXEC	MACRO
		xref	_LVO\1
		move.l	a6,-(sp)
		move.l	4,a6
		jsr		_LVO\1(a6)
		move.l	(sp)+,a6
			ENDM

GFX_RASTPORT_1_2 equ 1

dbug	macro	r
	xref	_kprintf
	movem.l	d0/d1/a0/a1,-(a7)
	move.l \1,-(a7)
	pea	a\@@(pc)
	jsr	_kprintf
	lea	8(a7),a7
	bra.s	b\@@
a\@@: dc.b	'%lx ',0,0
b\@@:
	movem.l	(a7)+,d0/d1/a0/a1
	endm

dbugw	macro	r
	xref	_kprintf
	movem.l	d0/d1/a0/a1,-(a7)
	move.w \1,-(a7)
	pea	a\@@(pc)
	jsr	_kprintf
	lea	6(a7),a7
	bra.s	b\@@
a\@@: dc.b	'%x ',0
b\@@:
	movem.l	(a7)+,d0/d1/a0/a1
	endm

print	macro	string
	xref	KPutStr
	movem.l	a0/a1/d0/d1,-(a7)
	lea	mystring\@@(pc),a0
	jsr	KPutStr
	movem.l	(a7)+,a0/a1/d0/d1
	bra.s	skip\@@
mystring\@@:
	dc.b	\1,0
	cnop	0,2
skip\@@:
	endm

vp_to_vector	macro	vp_ptr,vec_ofs,default_vector
;			\1     \2      \3
	move.l	vp_ColorMap(\1),\1
	cmp	#0,\1
	beq.s	use_default\@@
	tst.b	cm_Type(\1)
	beq.s	use_default\@@
	move.l	cm_vpe(\1),\1
	cmp	#0,\1
	beq.s	use_default\@@
	move.l	vpe_VecTable(\1),\1
	cmp	#0,\1
	beq.s	use_default\@@
	move.l	\2(\1),\1
	bra.s	end_macro\@@
use_default\@@:
	lea	\3,\1
end_macro\@@:
	endm

UNLIKELY_BYTE	equ	$f5
UNLIKELY_WORD	equ	$805c

WORDVAR	macro	vname
TEMP_SIZE	set	TEMP_SIZE+(TEMP_SIZE&1)	; even up
\1_w		set	TEMP_SIZE
TEMP_SIZE	set	TEMP_SIZE+2
	endm

LONGVAR	macro	vname
TEMP_SIZE	set	TEMP_SIZE+((4-(TEMP_SIZE&3))&3)	; lword align
\1_l		set	TEMP_SIZE
TEMP_SIZE	set	TEMP_SIZE+4
	endm

BVAR	macro	vname
\1_b	set	TEMP_SIZE
TEMP_SIZE	set	TEMP_SIZE+1
	endm

ARRAYVAR	macro	vname,size
TEMP_SIZE	set	TEMP_SIZE+((4-(TEMP_SIZE&3))&3)	; lword align
\1	set	TEMP_SIZE
TEMP_SIZE	set	TEMP_SIZE+\2
	endm

ALLOCLOCALS	macro
; align temp_size and sub from sp
TEMP_SIZE	set	TEMP_SIZE+((4-(TEMP_SIZE&3))&3)	; lword align
	lea	-TEMP_SIZE(a7),a7
	endm

@


39.4
log
@ added DEFINES for UNLIKELY_WORD and BYTE. used to tag interleaved
bitmaps.
@
text
@d5 1
a5 1
*	$Id: macros.i,v 39.3 91/10/30 15:47:22 chrisg Exp Locker: chrisg $
d10 4
d138 30
@


39.3
log
@ added macro to get vectors via a viewport with null checking.
@
text
@d5 1
a5 1
*	$Id: macros.i,v 39.2 91/10/28 11:51:37 chrisg Exp Locker: chrisg $
d10 3
d131 3
@


39.2
log
@ added dbugw macro
@
text
@d5 1
a5 1
*	$Id: macros.i,v 39.1 91/09/23 12:22:43 chrisg Exp Locker: chrisg $
d10 3
d107 20
@


39.1
log
@rcsdiff graphnt.h
added new dbg macro
@
text
@d5 1
a5 1
*	$Id: macros.i,v 39.0 91/08/21 17:11:38 chrisg Exp Locker: chrisg $
d10 4
d76 13
@


39.0
log
@Bumped
@
text
@d5 1
a5 1
*	$Id: macros.i,v 37.1 91/07/09 16:31:28 chrisg Exp Locker: chrisg $
d10 3
d62 13
@


37.1
log
@  added amzing print macro
@
text
@d5 1
a5 1
*	$Id: macros.i,v 37.0 91/01/07 15:14:46 spence Exp Locker: chrisg $
d10 3
@


37.0
log
@initial switchover from V36
@
text
@d5 1
a5 1
*	$Id: macros.i,v 33.3 90/07/27 16:30:10 bart Exp Locker: spence $
d7 1
a7 1
*	$Locker: spence $
d10 3
d57 12
@


33.3
log
@*** empty log message ***
@
text
@d5 1
a5 1
*	$Id: $
d7 1
a7 1
*	$Locker: bart $
d10 3
@


33.2
log
@*** empty log message ***
@
text
@d5 1
a5 1
*	$Header: /usr/commodore/amiga/V36/src/kickstart/graphics/RCS/macros.i,v 33.1 89/05/02 09:31:48 bart Exp Locker: bart $
d10 3
@


33.1
log
@copyright 1989
@
text
@d5 1
a5 1
*	$Header: macros.i,v 33.0 86/05/17 14:57:42 bart Exp $
d10 3
@


33.0
log
@added to rcs for updating
@
text
@d5 1
a5 1
*	$Header: $
d7 1
a7 1
*	$Locker: $
d9 4
a12 1
*	$Log: $
@
